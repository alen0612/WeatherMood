{"ast":null,"code":"import _objectSpread from\"C:/Users/User/Desktop/weathermood/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/User/Desktop/weathermood/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import Mynavbar from\"./Components/Mynavbar\";import Today from\"./Pages/Today\";import Forecast from\"./Pages/Forecast\";import SignIn from\"./Components/SignIn\";import React,{useEffect,useState}from\"react\";import{Alert}from\"bootstrap\";import Axios from\"axios\";import SignUp from\"./Components/SignUp\";import{AuthContext}from\"./helpers/AuthContext\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var APIkey=\"029ab88b8a27d39ef20a062c38c4b411\";function App(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),showToday=_useState2[0],setShowToday=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openSignIn=_useState4[0],setOpenSignIn=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openSignUp=_useState6[0],setOpenSignUp=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),currentUser=_useState8[0],setCurrentUser=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),authState=_useState10[0],setAuthState=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),date=_useState12[0],setDate=_useState12[1];var dayList=[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thur\",\"Fri\",\"Sat\"];var _useState13=useState({location:\"Taipei\",unit:\"metric\",temp:0,graph:\"°C\",weather:\"Clear\"}),_useState14=_slicedToArray(_useState13,2),todayWeather=_useState14[0],setTodayWeather=_useState14[1];var _useState15=useState({temp:[0,0,0,0],weather:[\"Clear\",\"Clear\",\"Clear\",\"Clear\"],id:[0,0,0,0],location:\"Taipei\"}),_useState16=_slicedToArray(_useState15,2),forecast=_useState16[0],setForecast=_useState16[1];var _useState17=useState({backgroundImage:\"url(/WeatherMood/clearLogo.png)\"}),_useState18=_slicedToArray(_useState17,2),logo=_useState18[0],setLogo=_useState18[1];var _useState19=useState({backgroundImage:\"url(/WeatherMood/clear.jpg)\"}),_useState20=_slicedToArray(_useState19,2),background=_useState20[0],setBackground=_useState20[1];useEffect(function(){getLocation();getDate();axios.get(\"http://localhost:3001/users/auth\",{headers:{accessToken:localStorage.getItem(\"accessToken\")}}).then(function(response){if(response.data.error){setAuthState(false);}else{setAuthState(true);}});},[]);var getDate=function getDate(){var day=new Date();setDate(day.getDay());};var getLocation=function getLocation(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(getLonandLat);else Alert(\"Geolocation is not supported!\");};function getLonandLat(position){initialWeather(position.coords.longitude,position.coords.latitude);//initialForecast(position.coords.longitude, position.coords.latitude);\n}var initialWeather=function initialWeather(lon,lat){// this will render initial page when user get in website for the first time\nAxios.get(\"https://api.openweathermap.org/data/2.5/weather?lat=\"+lat+\"&lon=\"+lon+\"&units=\"+todayWeather.unit+\"&appid=\"+APIkey).then(function(response){//console.log(response.data);\n//console.log(response.data.weather[0].main);\nsetTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{graph:todayWeather.unit===\"metric\"?\"°C\":\"°F\",temp:parseInt(response.data.main.temp),location:response.data.name});});checkWeather(response.data.weather[0].id);}).catch(function(error){alert(\"City Not Found!\");});Axios.get(\"https://api.openweathermap.org/data/2.5/forecast?lat=\"+lat+\"&lon=\"+lon+\"&units=\"+todayWeather.unit+\"&appid=\"+APIkey).then(function(response){//console.log(response.data.city.name);\nsetForecast(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{temp:[parseInt(response.data.list[8].main.temp),parseInt(response.data.list[16].main.temp),parseInt(response.data.list[24].main.temp),parseInt(response.data.list[32].main.temp)],location:response.data.city.name});});checkForecastWeather([response.data.list[8].weather[0].id,response.data.list[16].weather[0].id,response.data.list[24].weather[0].id,response.data.list[32].weather[0].id]);});};function checkForecastWeather(ID){//console.log(\"set forecast ID\");\nsetForecast(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{id:[ID[0],ID[1],ID[2],ID[3]],weather:[setForecastIcon(ID[0]),setForecastIcon(ID[1]),setForecastIcon(ID[2]),setForecastIcon(ID[3])]});});}function setForecastIcon(ID){//console.log(\"set forecast icon\");\nif(ID>=200&&ID<300)return\"Tunderstorm\";else if(ID>=300&&ID<600)return\"Rain\";else if(ID>=600&&ID<700)return\"Snow\";else if(ID>=700&&ID<800)return\"Mist\";else if(ID===800)return\"Clear\";else return\"Clouds\";}var getWeather=function getWeather(){//console.log(\"int today.getWeather: \" + unit);\nAxios.get(\"https://api.openweathermap.org/data/2.5/weather?q=\"+todayWeather.location+\"&units=\"+todayWeather.unit+\"&appid=\"+APIkey).then(function(response){//console.log(response.data);\n//console.log(response.data.weather[0].main);\nsetTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{graph:todayWeather.unit===\"metric\"?\"°C\":\"°F\",temp:parseInt(response.data.main.temp)});});checkWeather(response.data.weather[0].id);}).catch(function(error){alert(\"City Not Found!\");getLocation();});Axios.get(\"https://api.openweathermap.org/data/2.5/forecast?q=\"+todayWeather.location+\"&units=\"+todayWeather.unit+\"&appid=\"+APIkey).then(function(response){//console.log(response.data);\nsetForecast(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{temp:[parseInt(response.data.list[8].main.temp),parseInt(response.data.list[16].main.temp),parseInt(response.data.list[24].main.temp),parseInt(response.data.list[32].main.temp)],location:response.data.city.name});});checkForecastWeather([response.data.list[8].weather[0].id,response.data.list[16].weather[0].id,response.data.list[24].weather[0].id,response.data.list[32].weather[0].id]);});};var checkWeather=function checkWeather(weatherID){if(weatherID>=200&&weatherID<300){setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{weather:\"Thunderstorm\"});});setBackground({backgroundImage:\"url(/WeatherMood/thunderstorm.jpg)\"});setLogo({backgroundImage:\"url(/WeatherMood/thunderstormLogo.png)\"});}else if(weatherID>=300&&weatherID<600){setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{weather:\"Rain\"});});setBackground({backgroundImage:\"url(/WeatherMood/rain.jpg)\"});setLogo({backgroundImage:\"url(/WeatherMood/rainLogo.png)\"});}else if(weatherID>=600&&weatherID<700){setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{weather:\"Snow\"});});setBackground({backgroundImage:\"url(/WeatherMood/snow.jpg)\"});setLogo({backgroundImage:\"url(/WeatherMood/snowLogo.png)\"});}else if(weatherID>=700&&weatherID<800){setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{weather:\"Mist\"});});setBackground({backgroundImage:\"url(/WeatherMood/mist.jpg)\"});setLogo({backgroundImage:\"url(/WeatherMood/mistLogo.png)\"});}else if(weatherID===800){setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{weather:\"Clear\"});});setBackground({backgroundImage:\"url(/WeatherMood/clear.jpg)\"});setLogo({backgroundImage:\"url(/WeatherMood/clearLogo.png)\"});}else{setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{weather:\"Clouds\"});});setBackground({backgroundImage:\"url(/WeatherMood/cloud.jpg)\"});setLogo({backgroundImage:\"url(/WeatherMood/cloudLogo.png)\"});}};function setLocation(data){setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{location:data});});}function setUnit(data){setTodayWeather(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{unit:data});});}return showToday===true?/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(AuthContext.Provider,{value:{authState:authState,setAuthState:setAuthState},children:[/*#__PURE__*/_jsx(Mynavbar,{openSignIn:openSignIn,openSignUp:openSignUp,currentUser:currentUser,authState:authState,setShowToday:setShowToday,setOpenSignIn:setOpenSignIn,setOpenSignUp:setOpenSignUp,setCurrentUser:setCurrentUser,setAuthState:setAuthState}),openSignIn===true?/*#__PURE__*/_jsx(SignIn,{openSignIn:openSignIn,openSignUp:openSignUp,setOpenSignIn:setOpenSignIn,setOpenSignUp:setOpenSignUp,setCurrentUser:setCurrentUser,setAuthState:setAuthState}):openSignUp===true?/*#__PURE__*/_jsx(SignUp,{openSignIn:openSignIn,openSignUp:openSignUp,setOpenSignIn:setOpenSignIn,setOpenSignUp:setOpenSignUp}):/*#__PURE__*/_jsx(Today,{background:background,logo:logo,todayWeather:todayWeather,currentUser:currentUser,getWeather:getWeather,setTodayWeather:setTodayWeather,setLocation:setLocation,setUnit:setUnit})]})}):/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(AuthContext.Provider,{value:{authState:authState,setAuthState:setAuthState},children:[/*#__PURE__*/_jsx(Mynavbar,{openSignIn:openSignIn,openSignUp:openSignUp,currentUser:currentUser,authState:authState,setShowToday:setShowToday,setOpenSignIn:setOpenSignIn,setOpenSignUp:setOpenSignUp,setCurrentUser:setCurrentUser,setAuthState:setAuthState}),openSignIn===true?/*#__PURE__*/_jsx(SignIn,{openSignIn:openSignIn,openSignUp:openSignUp,setOpenSignIn:setOpenSignIn,setOpenSignUp:setOpenSignUp,setCurrentUser:setCurrentUser,setAuthState:setAuthState}):openSignUp===true?/*#__PURE__*/_jsx(SignUp,{openSignIn:openSignIn,openSignUp:openSignUp,setOpenSignIn:setOpenSignIn,setOpenSignUp:setOpenSignUp}):/*#__PURE__*/_jsx(Forecast,{todayWeather:todayWeather,date:date,dayList:dayList,forecast:forecast,getWeather:getWeather,setTodayWeather:setTodayWeather,setLocation:setLocation,setUnit:setUnit})]})});}export default App;","map":{"version":3,"sources":["C:/Users/User/Desktop/weathermood/client/src/App.js"],"names":["Mynavbar","Today","Forecast","SignIn","React","useEffect","useState","Alert","Axios","SignUp","AuthContext","axios","APIkey","App","showToday","setShowToday","openSignIn","setOpenSignIn","openSignUp","setOpenSignUp","currentUser","setCurrentUser","authState","setAuthState","date","setDate","dayList","location","unit","temp","graph","weather","todayWeather","setTodayWeather","id","forecast","setForecast","backgroundImage","logo","setLogo","background","setBackground","getLocation","getDate","get","headers","accessToken","localStorage","getItem","then","response","data","error","day","Date","getDay","navigator","geolocation","getCurrentPosition","getLonandLat","position","initialWeather","coords","longitude","latitude","lon","lat","prevState","parseInt","main","name","checkWeather","catch","alert","list","city","checkForecastWeather","ID","setForecastIcon","getWeather","weatherID","setLocation","setUnit"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport Mynavbar from \"./Components/Mynavbar\";\nimport Today from \"./Pages/Today\";\nimport Forecast from \"./Pages/Forecast\";\nimport SignIn from \"./Components/SignIn\";\nimport React, { useEffect, useState } from \"react\";\nimport { Alert } from \"bootstrap\";\nimport Axios from \"axios\";\nimport SignUp from \"./Components/SignUp\";\nimport { AuthContext } from \"./helpers/AuthContext\";\nimport axios from \"axios\";\n\nconst APIkey = \"029ab88b8a27d39ef20a062c38c4b411\";\n\nfunction App() {\n  const [showToday, setShowToday] = useState(true);\n  const [openSignIn, setOpenSignIn] = useState(false);\n  const [openSignUp, setOpenSignUp] = useState(false);\n  const [currentUser, setCurrentUser] = useState(\"\");\n  const [authState, setAuthState] = useState(false);\n\n  const [date, setDate] = useState(0);\n  const dayList = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thur\", \"Fri\", \"Sat\"];\n\n  const [todayWeather, setTodayWeather] = useState({\n    location: \"Taipei\",\n    unit: \"metric\",\n    temp: 0,\n    graph: \"°C\",\n    weather: \"Clear\",\n  });\n  const [forecast, setForecast] = useState({\n    temp: [0, 0, 0, 0],\n    weather: [\"Clear\", \"Clear\", \"Clear\", \"Clear\"],\n    id: [0, 0, 0, 0],\n    location: \"Taipei\",\n  });\n  const [logo, setLogo] = useState({\n    backgroundImage: \"url(/WeatherMood/clearLogo.png)\",\n  });\n  const [background, setBackground] = useState({\n    backgroundImage: \"url(/WeatherMood/clear.jpg)\",\n  });\n\n  useEffect(() => {\n    getLocation();\n    getDate();\n    axios\n      .get(\"http://localhost:3001/users/auth\", {\n        headers: { accessToken: localStorage.getItem(\"accessToken\") },\n      })\n      .then((response) => {\n        if (response.data.error) {\n          setAuthState(false);\n        } else {\n          setAuthState(true);\n        }\n      });\n  }, []);\n\n  const getDate = () => {\n    var day = new Date();\n    setDate(day.getDay());\n  };\n\n  const getLocation = () => {\n    if (navigator.geolocation)\n      navigator.geolocation.getCurrentPosition(getLonandLat);\n    else Alert(\"Geolocation is not supported!\");\n  };\n\n  function getLonandLat(position) {\n    initialWeather(position.coords.longitude, position.coords.latitude);\n    //initialForecast(position.coords.longitude, position.coords.latitude);\n  }\n\n  const initialWeather = (lon, lat) => {\n    // this will render initial page when user get in website for the first time\n    Axios.get(\n      \"https://api.openweathermap.org/data/2.5/weather?lat=\" +\n        lat +\n        \"&lon=\" +\n        lon +\n        \"&units=\" +\n        todayWeather.unit +\n        \"&appid=\" +\n        APIkey\n    )\n      .then((response) => {\n        //console.log(response.data);\n        //console.log(response.data.weather[0].main);\n        setTodayWeather((prevState) => ({\n          ...prevState,\n          graph: todayWeather.unit === \"metric\" ? \"°C\" : \"°F\",\n          temp: parseInt(response.data.main.temp),\n          location: response.data.name,\n        }));\n        checkWeather(response.data.weather[0].id);\n      })\n      .catch((error) => {\n        alert(\"City Not Found!\");\n      });\n\n    Axios.get(\n      \"https://api.openweathermap.org/data/2.5/forecast?lat=\" +\n        lat +\n        \"&lon=\" +\n        lon +\n        \"&units=\" +\n        todayWeather.unit +\n        \"&appid=\" +\n        APIkey\n    ).then((response) => {\n      //console.log(response.data.city.name);\n      setForecast((prevState) => ({\n        ...prevState,\n        temp: [\n          parseInt(response.data.list[8].main.temp),\n          parseInt(response.data.list[16].main.temp),\n          parseInt(response.data.list[24].main.temp),\n          parseInt(response.data.list[32].main.temp),\n        ],\n        location: response.data.city.name,\n      }));\n      checkForecastWeather([\n        response.data.list[8].weather[0].id,\n        response.data.list[16].weather[0].id,\n        response.data.list[24].weather[0].id,\n        response.data.list[32].weather[0].id,\n      ]);\n    });\n  };\n\n  function checkForecastWeather(ID) {\n    //console.log(\"set forecast ID\");\n    setForecast((prevState) => ({\n      ...prevState,\n      id: [ID[0], ID[1], ID[2], ID[3]],\n      weather: [\n        setForecastIcon(ID[0]),\n        setForecastIcon(ID[1]),\n        setForecastIcon(ID[2]),\n        setForecastIcon(ID[3]),\n      ],\n    }));\n  }\n\n  function setForecastIcon(ID) {\n    //console.log(\"set forecast icon\");\n    if (ID >= 200 && ID < 300) return \"Tunderstorm\";\n    else if (ID >= 300 && ID < 600) return \"Rain\";\n    else if (ID >= 600 && ID < 700) return \"Snow\";\n    else if (ID >= 700 && ID < 800) return \"Mist\";\n    else if (ID === 800) return \"Clear\";\n    else return \"Clouds\";\n  }\n\n  const getWeather = () => {\n    //console.log(\"int today.getWeather: \" + unit);\n    Axios.get(\n      \"https://api.openweathermap.org/data/2.5/weather?q=\" +\n        todayWeather.location +\n        \"&units=\" +\n        todayWeather.unit +\n        \"&appid=\" +\n        APIkey\n    )\n      .then((response) => {\n        //console.log(response.data);\n        //console.log(response.data.weather[0].main);\n\n        setTodayWeather((prevState) => ({\n          ...prevState,\n          graph: todayWeather.unit === \"metric\" ? \"°C\" : \"°F\",\n          temp: parseInt(response.data.main.temp),\n        }));\n\n        checkWeather(response.data.weather[0].id);\n      })\n      .catch((error) => {\n        alert(\"City Not Found!\");\n        getLocation();\n      });\n\n    Axios.get(\n      \"https://api.openweathermap.org/data/2.5/forecast?q=\" +\n        todayWeather.location +\n        \"&units=\" +\n        todayWeather.unit +\n        \"&appid=\" +\n        APIkey\n    ).then((response) => {\n      //console.log(response.data);\n      setForecast((prevState) => ({\n        ...prevState,\n        temp: [\n          parseInt(response.data.list[8].main.temp),\n          parseInt(response.data.list[16].main.temp),\n          parseInt(response.data.list[24].main.temp),\n          parseInt(response.data.list[32].main.temp),\n        ],\n        location: response.data.city.name,\n      }));\n      checkForecastWeather([\n        response.data.list[8].weather[0].id,\n        response.data.list[16].weather[0].id,\n        response.data.list[24].weather[0].id,\n        response.data.list[32].weather[0].id,\n      ]);\n    });\n  };\n\n  const checkWeather = (weatherID) => {\n    if (weatherID >= 200 && weatherID < 300) {\n      setTodayWeather((prevState) => ({\n        ...prevState,\n        weather: \"Thunderstorm\",\n      }));\n      setBackground({ backgroundImage: \"url(/WeatherMood/thunderstorm.jpg)\" });\n      setLogo({ backgroundImage: \"url(/WeatherMood/thunderstormLogo.png)\" });\n    } else if (weatherID >= 300 && weatherID < 600) {\n      setTodayWeather((prevState) => ({\n        ...prevState,\n        weather: \"Rain\",\n      }));\n      setBackground({ backgroundImage: \"url(/WeatherMood/rain.jpg)\" });\n      setLogo({ backgroundImage: \"url(/WeatherMood/rainLogo.png)\" });\n    } else if (weatherID >= 600 && weatherID < 700) {\n      setTodayWeather((prevState) => ({\n        ...prevState,\n        weather: \"Snow\",\n      }));\n      setBackground({ backgroundImage: \"url(/WeatherMood/snow.jpg)\" });\n      setLogo({ backgroundImage: \"url(/WeatherMood/snowLogo.png)\" });\n    } else if (weatherID >= 700 && weatherID < 800) {\n      setTodayWeather((prevState) => ({\n        ...prevState,\n        weather: \"Mist\",\n      }));\n      setBackground({ backgroundImage: \"url(/WeatherMood/mist.jpg)\" });\n      setLogo({ backgroundImage: \"url(/WeatherMood/mistLogo.png)\" });\n    } else if (weatherID === 800) {\n      setTodayWeather((prevState) => ({\n        ...prevState,\n        weather: \"Clear\",\n      }));\n      setBackground({ backgroundImage: \"url(/WeatherMood/clear.jpg)\" });\n      setLogo({ backgroundImage: \"url(/WeatherMood/clearLogo.png)\" });\n    } else {\n      setTodayWeather((prevState) => ({\n        ...prevState,\n        weather: \"Clouds\",\n      }));\n      setBackground({ backgroundImage: \"url(/WeatherMood/cloud.jpg)\" });\n      setLogo({ backgroundImage: \"url(/WeatherMood/cloudLogo.png)\" });\n    }\n  };\n\n  function setLocation(data) {\n    setTodayWeather((prevState) => ({\n      ...prevState,\n      location: data,\n    }));\n  }\n\n  function setUnit(data) {\n    setTodayWeather((prevState) => ({\n      ...prevState,\n      unit: data,\n    }));\n  }\n\n  return showToday === true ? (\n    <div className=\"App\">\n      <AuthContext.Provider value={{ authState, setAuthState }}>\n        <Mynavbar\n          openSignIn={openSignIn}\n          openSignUp={openSignUp}\n          currentUser={currentUser}\n          authState={authState}\n          setShowToday={setShowToday}\n          setOpenSignIn={setOpenSignIn}\n          setOpenSignUp={setOpenSignUp}\n          setCurrentUser={setCurrentUser}\n          setAuthState={setAuthState}\n        />\n\n        {openSignIn === true ? (\n          <SignIn\n            openSignIn={openSignIn}\n            openSignUp={openSignUp}\n            setOpenSignIn={setOpenSignIn}\n            setOpenSignUp={setOpenSignUp}\n            setCurrentUser={setCurrentUser}\n            setAuthState={setAuthState}\n          />\n        ) : openSignUp === true ? (\n          <SignUp\n            openSignIn={openSignIn}\n            openSignUp={openSignUp}\n            setOpenSignIn={setOpenSignIn}\n            setOpenSignUp={setOpenSignUp}\n          />\n        ) : (\n          <Today\n            background={background}\n            logo={logo}\n            todayWeather={todayWeather}\n            currentUser={currentUser}\n            getWeather={getWeather}\n            setTodayWeather={setTodayWeather}\n            setLocation={setLocation}\n            setUnit={setUnit}\n          />\n        )}\n      </AuthContext.Provider>\n    </div>\n  ) : (\n    <div className=\"App\">\n      <AuthContext.Provider value={{ authState, setAuthState }}>\n        <Mynavbar\n          openSignIn={openSignIn}\n          openSignUp={openSignUp}\n          currentUser={currentUser}\n          authState={authState}\n          setShowToday={setShowToday}\n          setOpenSignIn={setOpenSignIn}\n          setOpenSignUp={setOpenSignUp}\n          setCurrentUser={setCurrentUser}\n          setAuthState={setAuthState}\n        />\n\n        {openSignIn === true ? (\n          <SignIn\n            openSignIn={openSignIn}\n            openSignUp={openSignUp}\n            setOpenSignIn={setOpenSignIn}\n            setOpenSignUp={setOpenSignUp}\n            setCurrentUser={setCurrentUser}\n            setAuthState={setAuthState}\n          />\n        ) : openSignUp === true ? (\n          <SignUp\n            openSignIn={openSignIn}\n            openSignUp={openSignUp}\n            setOpenSignIn={setOpenSignIn}\n            setOpenSignUp={setOpenSignUp}\n          />\n        ) : (\n          <Forecast\n            todayWeather={todayWeather}\n            date={date}\n            dayList={dayList}\n            forecast={forecast}\n            getWeather={getWeather}\n            setTodayWeather={setTodayWeather}\n            setLocation={setLocation}\n            setUnit={setUnit}\n          />\n        )}\n      </AuthContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}